
/**!
 * easyPieChart
 * Lightweight plugin to render simple, animated and retina optimized pie charts
 *
 * @license 
 * @author Robert Fleischmann <rendro87@gmail.com> (http://robert-fleischmann.de)
 * @version 2.1.5
 **/

(function(e,t){if(typeof exports==="object"){module.exports=t(require("jquery"))}else if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(e.jQuery)}})(this,function(e){var t=function(e,t){var n;var r=document.createElement("canvas");e.appendChild(r);if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(r)}var i=r.getContext("2d");r.width=r.height=t.size;var s=1;if(window.devicePixelRatio>1){s=window.devicePixelRatio;r.style.width=r.style.height=[t.size,"px"].join("");r.width=r.height=t.size*s;i.scale(s,s)}i.translate(t.size/2,t.size/2);i.rotate((-1/2+t.rotate/180)*Math.PI);var o=(t.size-t.lineWidth)/2;if(t.scaleColor&&t.scaleLength){o-=t.scaleLength+2}Date.now=Date.now||function(){return+(new Date)};var u=function(e,t,n){n=Math.min(Math.max(-1,n||0),1);var r=n<=0?true:false;i.beginPath();i.arc(0,0,o,0,Math.PI*2*n,r);i.strokeStyle=e;i.lineWidth=t;i.stroke()};var a=function(){var e;var n;i.lineWidth=1;i.fillStyle=t.scaleColor;i.save();for(var r=24;r>0;--r){if(r%6===0){n=t.scaleLength;e=0}else{n=t.scaleLength*.6;e=t.scaleLength-n}i.fillRect(-t.size/2+e,0,n,1);i.rotate(Math.PI/12)}i.restore()};var f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var l=function(){if(t.scaleColor)a();if(t.trackColor)u(t.trackColor,t.lineWidth,1)};this.getCanvas=function(){return r};this.getCtx=function(){return i};this.clear=function(){i.clearRect(t.size/-2,t.size/-2,t.size,t.size)};this.draw=function(e){if(!!t.scaleColor||!!t.trackColor){if(i.getImageData&&i.putImageData){if(!n){l();n=i.getImageData(0,0,t.size*s,t.size*s)}else{i.putImageData(n,0,0)}}else{this.clear();l()}}else{this.clear()}i.lineCap=t.lineCap;var r;if(typeof t.barColor==="function"){r=t.barColor(e)}else{r=t.barColor}u(r,t.lineWidth,e/100)}.bind(this);this.animate=function(e,n,r){var i=Date.now();t.onStart(e,n);var s=function(){var o=Math.min(Date.now()-i,t.animate.duration);var u=t.easing(this,o,e,n-e,t.animate.duration);this.draw(u);t.onStep(e,n,u);if(o>=t.animate.duration){t.onStop(e,n)}else{f(s)}if(r){r(u)}}.bind(this);f(s)}.bind(this)};var n=function(e,n){var r={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,size:110,rotate:0,animate:{duration:1e3,enabled:true},easing:function(e,t,n,r,i){t=t/(i/2);if(t<1){return r/2*t*t+n}return-r/2*(--t*(t-2)-1)+n},onStart:function(e,t){return},onStep:function(e,t,n){return},onStop:function(e,t){return}};if(typeof t!=="undefined"){r.renderer=t}else if(typeof SVGRenderer!=="undefined"){r.renderer=SVGRenderer}else{throw new Error("Please load either the SVG- or the CanvasRenderer")}var i={};var s=0;var o=function(){this.el=e;this.options=i;for(var t in r){if(r.hasOwnProperty(t)){i[t]=n&&typeof n[t]!=="undefined"?n[t]:r[t];if(typeof i[t]==="function"){i[t]=i[t].bind(this)}}}if(typeof i.easing==="string"&&typeof jQuery!=="undefined"&&jQuery.isFunction(jQuery.easing[i.easing])){i.easing=jQuery.easing[i.easing]}else{i.easing=r.easing}if(typeof i.animate==="number"){i.animate={duration:i.animate,enabled:true}}if(typeof i.animate==="boolean"&&!i.animate){i.animate={duration:1e3,enabled:i.animate}}this.renderer=new i.renderer(e,i);this.renderer.draw(s);if(e.dataset&&e.dataset.percent){this.update(parseFloat(e.dataset.percent))}else if(e.getAttribute&&e.getAttribute("data-percent")){this.update(parseFloat(e.getAttribute("data-percent")))}}.bind(this);this.update=function(e,t){e=parseFloat(e);if(i.animate.enabled){this.renderer.animate(s,e,t)}else{this.renderer.draw(e)}s=e;return this}.bind(this);this.disableAnimation=function(){i.animate.enabled=false;return this};this.enableAnimation=function(){i.animate.enabled=true;return this};o()};e.fn.easyPieChart=function(t){return this.each(function(){var r;if(!e.data(this,"easyPieChart")){r=e.extend({},t,e(this).data());e.data(this,"easyPieChart",new n(this,r))}})}})